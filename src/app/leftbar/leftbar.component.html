<div class="flex flex-col h-full z-20">

    <div class="p-3 border-b border-gray-300 flex-shrink-0">
        <button class="w-full flex items-center justify-between p-3 text-sm font-semibold text-gray-800 bg-gray-50 hover:bg-gray-100 rounded-lg transition duration-150">
            <span class="text-lg font-bold">ArchiReport AI.</span>         
        </button>       
    </div>

    <div class="p-3 border-b border-gray-300 flex-shrink-0">
        <button (click)="startNewChat()" class="w-full flex items-center p-3 text-sm font-semibold text-gray-800 hover:bg-gray-100 rounded-lg transition duration-150 mb-1">
            <svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="0 0 24 24" class="text-gray-600 mr-3">
                <path fill="currentColor" d="M11 13H5v-2h6V5h2v6h6v2h-6v6h-2z"/>
            </svg>
            <span class="text-[14px] font-semibold">New Report</span>
        </button>

        <button class="w-full flex items-center p-3 text-sm font-semibold text-gray-800 hover:bg-gray-100 rounded-lg transition duration-150">
            <svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="0 0 24 24" class="text-gray-600 mr-3">
                <path fill="currentColor" d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89L9.78 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7c0 3.87-3.13 7-7 7S6 15.87 6 12h2c0 2.76 2.24 5 5 5s5-2.24 5-5s-2.24-5-5-5z"/>
            </svg>
            <span class="text-[14px] font-semibold">Report History</span>
        </button>
    </div>

    <div class="flex-grow overflow-y-auto space-y-2 p-3">
    
    <div *ngIf="history.length === 0" class="text-sm text-gray-500 p-2">
        Start a new analysis to see your history here.
    </div>

    <ng-container *ngIf="history.length > 0">
        <h3 class="text-xs font-medium uppercase text-gray-400 mt-2 mb-2">Recent Analysis</h3>
        
        <button *ngFor="let record of history.slice().reverse()"
                (click)="loadAnalysis(record)"
                class="w-full flex items-center space-x-2 p-2 text-sm text-gray-700 hover:text-black bg-gray-300 hover:bg-gray-50 rounded-lg transition duration-100 truncate border border-transparent hover:border-gray-200"
                title="{{ record.query }}">            
            <span class="truncate flex-grow text-left">{{ record.query }}</span>
        </button>
    </ng-container>

    </div>

    <div class="p-3 border-t border-gray-300 flex-shrink-0 space-y-2">    
        <button class="w-full flex items-center justify-center p-3 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition duration-150">
            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="mr-1 fill-current">
                <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2L9.19 8.63L2 9.24l5.46 4.73L5.82 21z"/>
            </svg>
            <span>Upgrade to Pro Analyst</span>
        </button>

        <div class="flex items-center space-x-3 p-2 text-sm text-gray-700 bg-gray-300 hover:bg-gray-100 rounded-lg transition duration-150 cursor-pointer">
            <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-semibold">J</div>
            <div class="truncate">
                <p class="font-medium">John</p>
                <p class="text-xs text-gray-500">Free User</p>
            </div>
        </div>
    </div>

</div>